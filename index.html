<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes">
  <title>Snakey Game</title>
  <link rel="shortcut icon" href="TemplateData/favicon.ico">
  <link rel="stylesheet" href="TemplateData/style.css">
</head>
<body>
<div id="unity-container">
  <canvas id="unity-canvas" tabindex="-1"></canvas>

  <div id="unity-loading-bar">
    <div id="unity-logo"></div>
    <div id="unity-progress-bar-empty">
      <div id="unity-progress-bar-full"></div>
    </div>
    <div id="unity-warning"></div>
  </div>
</div>

<script>
  const container = document.getElementById('unity-container');
  const canvas = document.getElementById('unity-canvas');
  const loadingBar = document.getElementById('unity-loading-bar');
  const progressFull = document.getElementById('unity-progress-bar-full');
  const warningBox = document.getElementById('unity-warning');

  function unityShowBanner(msg, type)
  {
    warningBox.textContent = msg;
    warningBox.style.display = 'block';

    if (type === 'warning')
    {
      setTimeout(() =>
      {
        warningBox.style.display = 'none';
        warningBox.textContent = '';
      }, 5000);
    }
  }

  function fitCanvas()
  {
    // Розтягуємо полотно на весь розмір вікна (без справжнього browser fullscreen)
    canvas.style.width = '100vw';
    canvas.style.height = '100vh';
  }

  window.addEventListener('resize', fitCanvas);
  fitCanvas();

  const buildUrl = 'Build';
  const loaderUrl = buildUrl + '/snake-web-build.loader.js';

  const config = {
    arguments: [],
    dataUrl: buildUrl + '/snake-web-build.data',
    frameworkUrl: buildUrl + '/snake-web-build.framework.js',
    codeUrl: buildUrl + '/snake-web-build.wasm',
    streamingAssetsUrl: 'StreamingAssets',
    companyName: 'Osambit',
    productName: 'Snakey Game',
    productVersion: '0.1',
    showBanner: unityShowBanner,
    devicePixelRatio: Math.min(2, window.devicePixelRatio || 1)
  };

  loadingBar.style.display = 'block';

  const script = document.createElement('script');
  script.src = loaderUrl;
  script.onload = () =>
  {
    createUnityInstance(canvas, config, (progress) =>
    {
      progressFull.style.width = (progress * 100) + '%';
    }).then((unityInstance) =>
    {
      loadingBar.style.display = 'none';
    }).catch((message) =>
    {
      alert(message);
    });
  };

  document.body.appendChild(script);
</script>
</body>
</html>
